<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.homi.model.dao.mapper.UserRoleMapper">

    <select id="getUserListByRoleId" resultType="com.homi.model.vo.company.user.UserVO">
        SELECT cu.id as company_user_id,
               u.id  as user_id,
               u.username,
               u.real_name,
               u.id_type,
               u.id_no,
               u.email,
               u.phone,
               cu.company_id,
               cu.dept_id,
               cu.user_type,
               u.nickname,
               u.avatar,
               u.gender,
               u.birthday,
               cu.status,
               u.remark,
               u.create_time,
               u.create_by,
               u.register_source
        FROM user_role ur
                 left join company_user cu on ur.user_id = cu.user_id
                 left join user u on cu.user_id = u.id
        <where>
            ur.role_id = #{roleId}
        </where>
        ORDER BY ur.id DESC
    </select>
</mapper>
