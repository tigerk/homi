<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.homi.model.dao.mapper.TenantContractMapper">

    <select id="getStatusTotal" resultType="com.homi.model.vo.tenant.TenantTotalItemVO">
        select tc.status,
               count(*) as total
        from tenant_contract tc
        where tc.deleted = false
        <include refid="tenantListQuery"/>
        group by tc.status
    </select>

    <sql id="tenantListQuery">
        <if test="query.name != null and query.name != ''">
            and tc.tenant_name like concat('%', #{query.name,jdbcType=VARCHAR}, '%')
        </if>

        <if test="query.phone != null and query.phone != ''">
            and tc.tenant_phone =
                #{query.phone,jdbcType=VARCHAR}
        </if>
        <if test="query.tenantType != null">
            and tc.tenant_type = #{query.tenantType,jdbcType=INTEGER}
        </if>
        <if test="query.status != null">
            and tc.status = #{query.status,jdbcType=INTEGER}
        </if>
    </sql>

    <select id="pageTenantList" resultType="com.homi.model.vo.tenant.TenantContractListVO">
        SELECT tc.*
        FROM tenant_contract tc
        where tc.deleted = false
        <include refid="tenantListQuery"/>
        order by tc.id DESC
    </select>
</mapper>
